generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url = "file:./dev.db"
}

model Room {
  id Int @id @default(autoincrement())
  roomID String @unique 
}

model Chat {
  
  id Int @id @default(autoincrement())
  roomID String @unique

  createdAt DateTime @default(now())
  ava String

  ownerId Int
  owner User @relation(fields: [ownerId], references: [id])
}

model User {
  id Int @id @default(autoincrement())
  username String @unique
  password String 
  createdAt DateTime @default(now())

  ava String?

  chats Chat[]
  messages  Msg[] //обратная связь для msg (чтоб можно бывло получить who)

}

model Msg {
  id Int @id @default(autoincrement())
  text String
  createdAt DateTime @default(now())

  roomID String
  ava String?

  whoId Int
  who User @relation(fields: [whoId], references: [id]) 
}